
const tDefs = [
  {
    "code": "EF2189",
    "editOn": "2004-07-01 16:09:00",
    "editer": {
      "email": "2956901287@qq.com",
      "id": 2,
      "name": "Xianghai Zhang",
      "no": "1215072",
      "phone": "",
      "position": {
        "id": 2,
        "name": "ROLE_operator2"
      },
      "workcell": {
        "id": 7,
        "name": "JW05"
      }
    },
    "family": "JABIL FU",
    "familyId": 79,
    "id": 1091,
    "maxCount": 0,
    "model": "MOD 3XM2",
    "name": "MOD 3XM2 调谐夹具",
    "owner": {
      "email": "2956901287@qq.com",
      "id": 1,
      "name": "Lei Qian",
      "no": "1230936",
      "phone": "",
      "position": {
        "id": 5,
        "name": "ROLE_admin"
      },
      "workcell": {
        "$ref": "$.data.tDefs.list[0].editer.workcell"
      }
    },
    "partNo": "PNA90320/1 PNA90320/2 PNA90322/1",
    "pmPeriod": 30,
    "recOn": "2004-07-01 16:09:00",
    "recer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "remark": "",
    "upl": 3,
    "usedFor": "打调谐盖板",
    "workcell": {
      "$ref": "$.data.tDefs.list[0].editer.workcell"
    }
  },
  {
    "code": "EF2191",
    "editOn": "2004-07-01 16:10:00",
    "editer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "family": "JABIL FU",
    "familyId": 79,
    "id": 1092,
    "maxCount": 0,
    "model": "MOD 3XM2",
    "name": "MOD 3XM2 陶瓷安装夹具",
    "owner": {
      "$ref": "$.data.tDefs.list[0].owner"
    },
    "partNo": "PNA90320/1 PNA90320/2 PNA90322/1",
    "pmPeriod": 30,
    "recOn": "2004-07-01 16:10:00",
    "recer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "remark": "",
    "upl": 1,
    "usedFor": "陶瓷安装",
    "workcell": {
      "$ref": "$.data.tDefs.list[0].editer.workcell"
    }
  },
  {
    "code": "EF0789",
    "editOn": "2004-07-01 16:12:00",
    "editer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "family": "JABIL FU",
    "familyId": 79,
    "id": 1093,
    "maxCount": 0,
    "model": "MOD 3XM2",
    "name": "MOD 3XM2 陶瓷组装夹具",
    "owner": {
      "$ref": "$.data.tDefs.list[0].owner"
    },
    "partNo": "PNA90320/1 PNA90320/2 PNA90322/1",
    "pmPeriod": 30,
    "recOn": "2004-07-01 16:12:00",
    "recer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "remark": "",
    "upl": 2,
    "usedFor": "陶瓷组装",
    "workcell": {
      "$ref": "$.data.tDefs.list[0].editer.workcell"
    }
  },
  {
    "code": "EF2185",
    "editOn": "2004-07-01 16:13:00",
    "editer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "family": "JABIL FU",
    "familyId": 79,
    "id": 1094,
    "maxCount": 0,
    "model": "FU",
    "name": "MOD 防旋转夹具",
    "owner": {
      "$ref": "$.data.tDefs.list[0].owner"
    },
    "partNo": "PNA90320/1 PNA90320/2 PNA90322/1",
    "pmPeriod": 30,
    "recOn": "2004-07-01 16:13:00",
    "recer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "remark": "",
    "upl": 2,
    "usedFor": "波导防旋转",
    "workcell": {
      "$ref": "$.data.tDefs.list[0].editer.workcell"
    }
  },
  {
    "code": "EF2187",
    "editOn": "2004-07-01 16:13:00",
    "editer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "family": "JABIL FU",
    "familyId": 79,
    "id": 1095,
    "maxCount": 0,
    "model": "FU",
    "name": "MOD 盖板螺丝夹具",
    "owner": {
      "$ref": "$.data.tDefs.list[0].owner"
    },
    "partNo": "PNA90320/1 PNA90320/2 PNA90322/1",
    "pmPeriod": 30,
    "recOn": "2004-07-01 16:13:00",
    "recer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "remark": "",
    "upl": 1,
    "usedFor": "AIB盖板螺丝",
    "workcell": {
      "$ref": "$.data.tDefs.list[0].editer.workcell"
    }
  },
  {
    "code": "EF2188",
    "editOn": "2004-07-01 16:13:00",
    "editer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "family": "JABIL FU",
    "familyId": 79,
    "id": 1095,
    "maxCount": 0,
    "model": "FU",
    "name": "MOD 盖板螺丝夹具",
    "owner": {
      "$ref": "$.data.tDefs.list[0].owner"
    },
    "partNo": "PNA90320/1 PNA90320/2 PNA90322/1",
    "pmPeriod": 30,
    "recOn": "2004-07-01 16:13:00",
    "recer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "remark": "",
    "upl": 1,
    "usedFor": "AIB盖板螺丝",
    "workcell": {
      "$ref": "$.data.tDefs.list[0].editer.workcell"
    }
  },
  {
    "code": "EF2133",
    "editOn": "2004-07-01 16:13:00",
    "editer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "family": "JABIL FU",
    "familyId": 79,
    "id": 1095,
    "maxCount": 0,
    "model": "FU",
    "name": "MOD 盖板螺丝夹具",
    "owner": {
      "$ref": "$.data.tDefs.list[0].owner"
    },
    "partNo": "PNA90320/1 PNA90320/2 PNA90322/1",
    "pmPeriod": 30,
    "recOn": "2004-07-01 16:13:00",
    "recer": {
      "$ref": "$.data.tDefs.list[0].editer"
    },
    "remark": "",
    "upl": 1,
    "usedFor": "AIB盖板螺丝",
    "workcell": {
      "$ref": "$.data.tDefs.list[0].editer.workcell"
    }
  }
];


function fakeTDefs(page, pageSize, param, content, family) {
  let res = tDefs.concat();
  if (family) {
    res = res.filter(tDef => tDef.family === family);
  }
  if (param && content) {
    res = res.filter(tDef => tDef[param].includes(content));
  }
  const total = res.length;
  let start = (page - 1) * pageSize;
  let end = Math.min(page * pageSize, res.length);
  const list = res.slice(start, end);
  return {
    list: list,
    total: total
  };
}

/**
 * 获取所有报修记录
 */
function getTDefs(req, res) {
  let {
    page,
    pageSize,
    param,
    content,
    family
  } = req.query;
  if (!page) page = 1;
  if (!pageSize) pageSize = 16;


  const result = fakeTDefs(page, pageSize, param, content, family);


  return res.json({
    status: "success",
    data: {
      tDefs: {
        ...result
      }
    }
  });
}





export default {
  // 'GET /api/tDefs': getTDefs,
};


